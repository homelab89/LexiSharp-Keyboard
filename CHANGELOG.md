# 更新日志 / Changelog

## v3.6.7

### 新增功能
- **外部联动增强**: 添加外部输入法联动使用指引，优化使用指南内容
- **Pro 版本更新**: 为 Pro 版本添加专门的更新对话框

### 问题修复
- 优化 AI 后处理返回空文本时的回退逻辑

---

## v3.6.6

### 新增功能
- **AI 后处理优化**: 添加按字数阈值自动跳过 AI 后处理功能
- **Pro 双重识别**: 为联动时的火山引擎渠道添加双重识别支持
- **联动功能增强**: 联动调用时添加识别统计和历史记录

### 问题修复
- 修复语音预设失效问题
- 修复悬浮球在带系统栏设备上的位置越界问题

---

## v3.6.5

### 新增功能
- **Pro 正则后处理**: 添加正则表达式后处理功能（Pro 版本）

### 改进优化
- 优化粘贴功能实现
- 重构标点按键 UI 并替换供应商切换按钮图标

---

## v3.6.4

### 新增功能
- **三级撤销**: 支持三级撤销功能
- **供应商快捷切换**: 重构标点按钮布局并添加供应商切换功能
- **悬浮球位置重置**: 新增悬浮球位置重置功能
- **外部语音服务**: 新增外部语音服务 PCM 推送模式支持

### 改进优化
- 移除外部语音服务对无障碍权限的依赖
- 移除外部语音服务对悬浮球功能的依赖
- 优化软键盘弹出时的界面适配
- 移除 fcitx5-android-lexi-keyboard 子模块依赖

---

## v3.6.3

### 新增功能
- 在一键设置流程中添加通知权限检查

### 问题修复
- 修复键盘缩放时麦克风位置偏移和底部裁剪问题
- 修复 AI 编辑面板的麦克风交互
- 修复阿里云百炼流式语音识别停止时的资源竞争问题

### 改进优化
- 移除冗余的异常捕获并优化代码结构
- 移除外部语音服务权限声明
- 更新重要通知以支持小企鹅输入法的语音识别能力

---

## v3.6.2

### 新增功能
- **AIDL 联动**: 添加外部输入法 AIDL 联动支持
- **Pro 更新控制**: 为 Pro 渠道添加更新检查禁用支持

### 改进优化
- 统一语音识别后处理逻辑
- 统一外部语音服务配置来源
- 统一部分动态颜色定义

### 问题修复
- 修复反射调用中的类型转换和空安全处理

---

## v3.6.1

### 新增功能
- **隐私控制**: 新增隐私控制开关，支持禁用识别历史和使用统计
- **LLM 内容过滤**: 过滤 LLM 响应中的 think 标签内容

### 改进优化
- 优化更新对话框中的发布页面跳转交互
- 更新剪贴板和撤销按钮图标

---

## v3.6.0

### 新增功能
- **剪贴板历史管理**: 添加剪贴板历史管理面板功能
- **自定义键盘按钮**: 增加可自定义的键盘按钮
- **音频波形动画**: 添加实时音频波形动画功能
- **扩展按钮行**: 添加键盘扩展按钮行并重构状态显示区域
- **键盘空格文本**: 增加键盘空格文本显示
- **Pro 繁体转换**: 添加 Pro 功能-繁体中文转换占位

### 改进优化
- 更新扩展按钮默认配置和默认值处理
- 优化拓展按钮的数字面板按钮返回逻辑和选择模式功能
- 增强剪贴板同步提示和面板信息预览体验
- 移除设置页面按钮色块样式
- 添加 WaveLineView 开源库引用和许可证信息

---

## v3.5.2

### 改进优化
- 拆分各语言字段便于管理
- 为模型解压添加进度显示功能
- 统一 ASR 供应商显示逻辑

---

## v3.5.1

### 新增功能
- **Zipformer 引擎**: 新增 Zipformer 本地流式语音识别引擎支持
- **Paraformer 引擎**: 新增 Paraformer 本地流式语音识别引擎
- **ITN 支持**: 为 Paraformer 和 Zipformer 引擎添加 ITN（Inverse Text Normalization）支持

### 改进优化
- 移除 SenseVoice 伪流式识别模式
- 优化英文字符统计
- 添加 Zipformer 模型信息说明文本

---

## v3.5.0

### 新增功能
- **Android 15 支持**: 升级到 Android 15 targetSDK
- **DashScope 增强**:
  - DashScope 流式识别改为使用 Fun-ASR 模型
  - 添加 DashScope 地域选择支持
  - 集成 DashScope Java SDK 实现本地文件直传，优化 Qwen 模型非流式识别速度
- **双重识别**: 为火山引擎流式识别添加双重识别占位支持（Pro）
- **调试功能**:
  - 添加音频采集和 ASR 引擎的调试日志记录
  - 添加非流式识别请求耗时统计与展示
- **应用内更新**: 实现应用内下载安装包和安装功能
- **键盘功能**:
  - 添加键盘面板自动启动录音功能
  - 添加当前版本信息对话框
- **开源致谢**: 添加开源项目致谢与许可证展示
- **Pro 版本 UI**: 添加 Pro 版本 UI 注入功能
- **Soniox 增强**: 添加 Soniox ASR 引擎的上下文注入功能（Pro）

### 改进优化
- 添加压缩混淆规则，优化打包体积
- 伪流式识别动态处理间隔，尝试降低长录音处理压力
- 为更新检查添加重要提示样式支持
- 优化识别记录全选效果
- 实现统一的颜色管理

### 问题修复
- 修复录音时长统计读取方式
- 修复 APK 安装权限授权后自动继续安装功能
- 修复悬浮球视图状态管理问题
- 修复悬浮球错误状态复位问题
- 修复处理中旋转视图在视图不可见的问题
- 调整键盘视图按钮与信息栏的间隔
- 限制粘贴板预览为单行显示避免布局破坏
- 修复长按模式下快速点按后卡在识别状态的问题

---

> **说明**: 本更新日志基于 Git 提交记录自动生成，包含版本 v3.5.0 至 v3.6.7 的主要变更内容。
