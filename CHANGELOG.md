# 更新日志 / Changelog

## v3.9.0 (2025-12-09)

### 改进优化

- **回车键增强**: 支持更多软件的回车发送消息功能
- **UI 规范化**: 适配 Android 15 新 API
- **Pro 版本宣传弹窗**: 为规避风险更改应用名称为说点啥(BiBi Keyboard)

---

## v3.8.6 (2025-12-09)

### 新增功能

- **智谱 GLM ASR 支持**: 新增智谱 GLM 语音识别引擎支持，为下一个版本的 GLM-ASR 做准备
- **火山引擎模型版本选择**: 为火山引擎豆包 ASR 添加模型版本选择功能，支持在不同模型版本间切换
- **Pro 版本宣传弹窗**: 添加 Pro 版本功能介绍弹窗，帮助用户了解专业版特性

---

## v3.8.5 (2025-12-06)

### 新增功能

- **火山引擎标准版文件识别**: 新增火山引擎标准版文件识别支持，包含超时机制和详细错误处理
- **豆包语音识别模型 2.0**: 为火山引擎添加豆包语音识别模型 2.0 支持(暂不支持文件识别极速版)，提升识别准确性

### 改进优化

- **发布流程改进**: 改进发布流程以支持中英文更新日志，提升多语言发布效率

---

## v3.8.4 (2025-12-04)

### 新增功能

- **智能超时机制**: 新增首 token 超时机制和独立连接超时配置，流式失败时自动回退非流模式

### 改进优化

- **WebDAV 备份兼容性**: 针对坚果云等 WebDAV 服务添加兼容性支持和降级处理，提升备份功能稳定性
- **配置导入导出扩展**: 新增 SiliconFlow ASR、DashScope 地区、Soniox 流式等配置项的导入导出支持

### UI 改进

- **设置页面样式优化**: 统一设置页面的下拉选择器样式，采用带边框和下拉箭头的一致性设计
- **键盘高度选择器**: 键盘高度选择改用分段按钮控件，提升操作体验
- **布局结构简化**: 移除冗余的分组标题视图，优化布局间距和圆角样式

---

## v3.8.3 (2025-12-03)

### 新增功能

- **多供应商深度思考模式**: 新增多供应商 LLM 深度思考模式支持，提升 AI 后处理质量
- **内置服务提供商**: 重构 LLM 供应商架构，支持内置服务提供商，扩展后处理能力

### 改进优化

- **AI 提示词管理系统**: 重构 AI 后处理提示词管理系统，优化提示词的组织和使用，改进预置提示词

---

## v3.8.2 (2025-12-02)

### UI 改进

- **配置指南按钮**: 为本地模型设置页添加配置指南按钮
- **跳过按钮功能**: 为模型选择对话框添加跳过按钮功能

### 问题修复

- **状态栏图标颜色**: 修复状态栏颜色动态切换问题

---

## v3.8.1 (2025-11-29)

### UI 改进

- **应用图标优化**: 优化应用图标前景图层尺寸，提升视觉效果
- **预测性返回动画**: 为设置页面添加预测性返回动画，提升交互体验，需要安卓 13 以上版本

### 改进优化

- **WebDAV 备份重构**: 重构 WebDAV 备份实现，提升代码质量和可维护性

---

## v3.8.0 (2025-11-28)

### 新增功能

- **SiliconFlow 免费服务**: 添加 SiliconFlow 免费语音识别和后处理服务支持
- **动态超时机制**: 实现基于录音时长的动态超时计算，优化长时间录音的处理体验
- **悬浮球设置快捷入口**: 为悬浮球浮动菜单添加设置按钮，方便快速访问设置

### UI 改进

- **设置页面重构**: 重构设置页面布局为分组卡片设计，提升视觉层次和可读性
- **悬浮球触摸交互**: 改进悬浮球长按移动的触摸交互体验
- **样式统一优化**:
  - 统一各设置页面的文字样式定义和布局结构
  - 统一水平按钮容器的样式定义
  - 通过集中主题资源统一布局样式
- **按钮文案优化**: 优化点按模式录音手势按钮文案
- **剪贴板同步按钮**: 优化悬浮球中剪贴板同步按钮显示逻辑

---

## v3.7.3 (2025-11-25)

### 新增功能

- **录音手势控制**: 添加录音按钮手势控制功能，支持左滑松手取消录音、右滑直接发送和下滑临时固定为点按录音模式
- **波形灵敏度调节**: 新增音频波形显示灵敏度调节功能，可根据个人喜好调整波形动画的灵敏度
- **DashScope 模型升级**: DashScope 流式识别引擎升级为 Qwen3-ASR-Flash-Realtime 模型，提升识别速度和准确性
- **[Pro] 热词管理更新**: 为 Qwen3-ASR-Flash-Realtime 模型添加热词管理功能

---

## v3.7.2 (2025-11-23)

### 新增功能

- **模型选择引导**: 添加模型选择引导功能，帮助新用户快速选择合适的语音识别模型
- **[Pro] 畅说模式**: 新增畅说模式支持（Pro 版本）

### 改进优化

- 重构构建配置，移除多变体构建，清理开源代码库

### 文档更新

- 更新项目 logo 图片资源
- 更新 README 文档和图片资源

---

## v3.7.1 (2025-11-17)

### 新增功能

- **TeleSpeech 本地离线识别**: 新增基于 sherpa-onnx 的 TeleSpeech 本地 ASR 引擎，支持 int8/fp32 模型，提供完整的模型管理、预加载和自动卸载功能
- **TeleSpeech ITN 支持**: 为 TeleSpeech 引擎添加逆文本规范化（Inverse Text Normalization）功能，支持将"一千零一"等口语化表达转换为"1001"等书面形式
- **本地模型伪流式识别**: 为 SenseVoice 和 TeleSpeech 本地模型添加伪流式语音识别支持，通过 VAD 在停顿处分片，先进行小片段识别预览，会话结束后再对整段音频进行最终识别
- **ElevenLabs 流式识别**: 新增 ElevenLabs 实时流式语音识别支持，可在设置中选择流式或非流式模式
- **键盘主题配色优化**: 深色模式添加专用按键背景，浅色模式统一使用 colorSurface 提升对比度，键盘容器背景改为 colorSurfaceVariant 增强层次感
- **[Pro] 自定义配色功能**: 新增多套预设配色方案，支持系统配色跟随和自定义配色切换
- **状态文本跑马灯效果**: 为长状态消息添加跑马灯滚动效果，确保完整信息可见
- **错误信息自动复制**: 检测到错误信息时自动复制到剪贴板，方便用户反馈问题

### 问题修复

- 修复 TeleSpeech 模型下载时缺少进度通知的问题
- 修复伪流式识别引擎在会话结束后未正确清理预览片段的问题
- 修复 ElevenLabs WebSocket URL 构建问题并优化转写处理逻辑
- 修复剪贴板面板背景色不一致的问题

---

## v3.7.0 (2025-11-14)

### 新增功能

- **功能说明系统增强**: 为 ASR 设置、后处理、悬浮球及其他设置开关添加统一的功能说明弹窗系统
- **扩展按钮优化**:
  - 添加静音判停的扩展按钮功能
  - 添加收起键盘扩展按钮并将粘贴板按钮进行固定
- **剪贴板功能增强**: 添加云端剪贴板文件拉取支持
- **悬浮球改进**: 为识别记录文本面板添加分页加载功能

### 改进优化

- 优化默认设置以改善用户体验
- 将功能说明字符串按类别整理到对应的子字符串文件，便于管理

### 问题修复

- 修复悬浮球常驻模式下部分场景不自动半隐的问题
- 修复部分颜色系统问题
- 改进 Zipformer XL fp16 本地模型文件解压检测逻辑并修复下载取消功能
- 修复弹出后处理提示词或供应商选择菜单导致输入法意外收起的问题

---

## v3.6.8 (2025-11-13)

### 新增功能

- **本地模型导入**: 为所有语音识别模型添加本地文件导入功能
- **功能说明系统**: 添加输入设置的功能说明弹窗系统

### 改进优化

- 将模型下载和导入格式从 tar.bz2 迁移到 zip 格式
- 将"ASR 设置"翻译更新为"语音识别设置"
- 默认翻译资源改为英文

### 问题修复

- 优化 AI 后处理使用状态跟踪

---

## v3.6.7 (2025-11-10)

### 新增功能

- **外部联动增强**: 添加外部输入法联动使用指引，优化使用指南内容
- **Pro 版本更新**: 为 Pro 版本添加专门的更新对话框

### 问题修复

- 优化 AI 后处理返回空文本时的回退逻辑

---

## v3.6.6 (2025-11-10)

### 新增功能

- **AI 后处理优化**: 添加按字数阈值自动跳过 AI 后处理功能
- **Pro 双重识别**: 为联动时的火山引擎渠道添加双重识别支持
- **联动功能增强**: 联动调用时添加识别统计和历史记录

### 问题修复

- 修复语音预设失效问题
- 修复悬浮球在带系统栏设备上的位置越界问题

---

## v3.6.5 (2025-11-09)

### 新增功能

- **Pro 正则后处理**: 添加正则表达式后处理功能（Pro 版本）

### 改进优化

- 优化粘贴功能实现
- 重构标点按键 UI 并替换供应商切换按钮图标

---

## v3.6.4 (2025-11-09)

### 新增功能

- **三级撤销**: 支持三级撤销功能
- **供应商快捷切换**: 重构标点按钮布局并添加供应商切换功能
- **悬浮球位置重置**: 新增悬浮球位置重置功能
- **外部语音服务**: 新增外部语音服务 PCM 推送模式支持

### 改进优化

- 移除外部语音服务对无障碍权限的依赖
- 移除外部语音服务对悬浮球功能的依赖
- 优化软键盘弹出时的界面适配
- 移除 fcitx5-android-lexi-keyboard 子模块依赖

---

## v3.6.3 (2025-11-08)

### 新增功能

- 在一键设置流程中添加通知权限检查

### 问题修复

- 修复键盘缩放时麦克风位置偏移和底部裁剪问题
- 修复 AI 编辑面板的麦克风交互
- 修复阿里云百炼流式语音识别停止时的资源竞争问题

### 改进优化

- 移除冗余的异常捕获并优化代码结构
- 移除外部语音服务权限声明
- 更新重要通知以支持小企鹅输入法的语音识别能力

---

## v3.6.2 (2025-11-08)

### 新增功能

- **AIDL 联动**: 添加外部输入法 AIDL 联动支持
- **Pro 更新控制**: 为 Pro 渠道添加更新检查禁用支持

### 改进优化

- 统一语音识别后处理逻辑
- 统一外部语音服务配置来源
- 统一部分动态颜色定义

### 问题修复

- 修复反射调用中的类型转换和空安全处理

---

## v3.6.1 (2025-11-07)

### 新增功能

- **隐私控制**: 新增隐私控制开关，支持禁用识别历史和使用统计
- **LLM 内容过滤**: 过滤 LLM 响应中的 think 标签内容

### 改进优化

- 优化更新对话框中的发布页面跳转交互
- 更新剪贴板和撤销按钮图标

---

## v3.6.0 (2025-11-07)

### 新增功能

- **剪贴板历史管理**: 添加剪贴板历史管理面板功能
- **自定义键盘按钮**: 增加可自定义的键盘按钮
- **音频波形动画**: 添加实时音频波形动画功能
- **扩展按钮行**: 添加键盘扩展按钮行并重构状态显示区域
- **键盘空格文本**: 增加键盘空格文本显示
- **Pro 繁体转换**: 添加 Pro 功能-繁体中文转换占位

### 改进优化

- 更新扩展按钮默认配置和默认值处理
- 优化拓展按钮的数字面板按钮返回逻辑和选择模式功能
- 增强剪贴板同步提示和面板信息预览体验
- 移除设置页面按钮色块样式
- 添加 WaveLineView 开源库引用和许可证信息

---

## v3.5.2 (2025-11-06)

### 改进优化

- 拆分各语言字段便于管理
- 为模型解压添加进度显示功能
- 统一 ASR 供应商显示逻辑

---

## v3.5.1 (2025-11-05)

### 新增功能

- **Zipformer 引擎**: 新增 Zipformer 本地流式语音识别引擎支持
- **Paraformer 引擎**: 新增 Paraformer 本地流式语音识别引擎
- **ITN 支持**: 为 Paraformer 和 Zipformer 引擎添加 ITN（Inverse Text Normalization）支持

### 改进优化

- 移除 SenseVoice 伪流式识别模式
- 优化英文字符统计
- 添加 Zipformer 模型信息说明文本

---

## v3.5.0 (2025-11-05)

### 新增功能

- **Android 15 支持**: 升级到 Android 15 targetSDK
- **DashScope 增强**:
  - DashScope 流式识别改为使用 Fun-ASR 模型
  - 添加 DashScope 地域选择支持
  - 集成 DashScope Java SDK 实现本地文件直传，优化 Qwen 模型非流式识别速度
- **双重识别**: 为火山引擎流式识别添加双重识别占位支持（Pro）
- **调试功能**:
  - 添加音频采集和 ASR 引擎的调试日志记录
  - 添加非流式识别请求耗时统计与展示
- **应用内更新**: 实现应用内下载安装包和安装功能
- **键盘功能**:
  - 添加键盘面板自动启动录音功能
  - 添加当前版本信息对话框
- **开源致谢**: 添加开源项目致谢与许可证展示
- **Pro 版本 UI**: 添加 Pro 版本 UI 注入功能
- **Soniox 增强**: 添加 Soniox ASR 引擎的上下文注入功能（Pro）

### 改进优化

- 添加压缩混淆规则，优化打包体积
- 伪流式识别动态处理间隔，尝试降低长录音处理压力
- 为更新检查添加重要提示样式支持
- 优化识别记录全选效果
- 实现统一的颜色管理

### 问题修复

- 修复录音时长统计读取方式
- 修复 APK 安装权限授权后自动继续安装功能
- 修复悬浮球视图状态管理问题
- 修复悬浮球错误状态复位问题
- 修复处理中旋转视图在视图不可见的问题
- 调整键盘视图按钮与信息栏的间隔
- 限制粘贴板预览为单行显示避免布局破坏
- 修复长按模式下快速点按后卡在识别状态的问题

---

> **说明**: 本更新日志基于 Git 提交记录自动生成，包含版本 v3.5.0 至 v3.6.7 的主要变更内容。
