<div align="center">

# üéôÔ∏è BiBi Keyboard

**AI-powered Smart Voice Input Method | Make Voice Input More Natural and Efficient**

### üåê [Official Website](https://bibi.brycewg.com)

English | [ÁÆÄ‰Ωì‰∏≠Êñá](README.md)

[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](https://opensource.org/licenses/Apache-2.0)
[![Platform](https://img.shields.io/badge/Platform-Android-green.svg)](https://www.android.com/)
[![Language](https://img.shields.io/badge/Language-Kotlin-blue.svg)](https://kotlinlang.org/)
[![Telegram](https://img.shields.io/badge/Telegram-Join%20Chat-blue?logo=telegram)](https://t.me/+UGFobXqi2bYzMDFl)
[![zread](https://img.shields.io/badge/Ask_Zread-_.svg?style=flat&color=00b0aa&labelColor=000000&logo=data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTQuOTYxNTYgMS42MDAxSDIuMjQxNTZDMS44ODgxIDEuNjAwMSAxLjYwMTU2IDEuODg2NjQgMS42MDE1NiAyLjI0MDFWNC45NjAxQzEuNjAxNTYgNS4zMTM1NiAxLjg4ODEgNS42MDAxIDIuMjQxNTYgNS42MDAxSDQuOTYxNTZDNS4zMTUwMiA1LjYwMDEgNS42MDE1NiA1LjMxMzU2IDUuNjAxNTYgNC45NjAxVjIuMjQwMUM1LjYwMTU2IDEuODg2NjQgNS4zMTUwMiAxLjYwMDEgNC45NjE1NiAxLjYwMDFaIiBmaWxsPSIjZmZmIi8%2BCjxwYXRoIGQ9Ik00Ljk2MTU2IDEwLjM5OTlIMi4yNDE1NkMxLjg4ODEgMTAuMzk5OSAxLjYwMTU2IDEwLjY4NjQgMS42MDE1NiAxMS4wMzk5VjEzLjc1OTlDMS42MDE1NiAxNC4xMTM0IDEuODg4MSAxNC4zOTk5IDIuMjQxNTYgMTQuMzk5OUg0Ljk2MTU2QzUuMzE1MDIgMTQuMzk5OSA1LjYwMTU2IDE0LjExMzQgNS42MDE1NiAxMy43NTk5VjExLjAzOTlDNS42MDE1NiAxMC42ODY0IDUuMzE1MDIgMTAuMzk5OSA0Ljk2MTU2IDEwLjM5OTlaIiBmaWxsPSIjZmZmIi8%2BCjxwYXRoIGQ9Ik0xMy43NTg0IDEuNjAwMUgxMS4wMzg0QzEwLjY4NSAxLjYwMDEgMTAuMzk4NCAxLjg4NjY0IDEwLjM5ODQgMi4yNDAxVjQuOTYwMUMxMC4zOTg0IDUuMzEzNTYgMTAuNjg1IDUuNjAwMSAxMS4wMzg0IDUuNjAwMUgxMy43NTg0QzE0LjExMTkgNS42MDAxIDE0LjM5ODQgNS4zMTM1NiAxNC4zOTg0IDQuOTYwMVYyLjI0MDFDMTQuMzk4NCAxLjg4NjY0IDE0LjExMTkgMS42MDAxIDEzLjc1ODQgMS42MDAxWiIgZmlsbD0iI2ZmZiIvPgo8cGF0aCBkPSJNNCAxMkwxMiA0TDQgMTJaIiBmaWxsPSIjZmZmIi8%2BCjxwYXRoIGQ9Ik00IDEyTDEyIDQiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgo8L3N2Zz4K&logoColor=ffffff)](https://zread.ai/BryceWG/BiBi-Keyboard)
[![Ask DeepWiki](https://deepwiki.com/badge.svg)](https://deepwiki.com/BryceWG/BiBi-Keyboard)
![GitHub all releases](https://img.shields.io/github/downloads/BryceWG/BiBi-Keyboard/total)

[Features](#-features) ‚Ä¢ [Quick Start](#-quick-start) ‚Ä¢ [User Guide](#-user-guide) ‚Ä¢ [Configuration](#-configuration)

</div>

## ‚ú® Features

<table>
<tr>
<td width="50%">

### üé§ Voice Recognition

- **Press & Hold Recording** - Simple and intuitive recording
- **Smart Auto-Stop** - Automatically stops recording on silence
- **Fast Recognition** - Release to upload, quick results
- **Multi-Engine Support** - 11 mainstream ASR services (7 cloud + 4 local)
- **Local ASR Model** - Offline voice recognition, no network required, privacy-focused
- **AI Text Optimization** - LLM smart correction of recognition results

</td>
<td width="50%">

### üü£ Floating Ball Input ‚≠ê

- **Cross-IME Usage** - Voice input with any input method
- **Seamless Integration** - Maintain your original typing habits
- **Auto Insertion** - Recognition results automatically inserted
- **Compatibility Mode** - Support for Telegram, TikTok and other special apps
- **Visual Feedback** - Recording/processing status at a glance

</td>
</tr>
<tr>
<td width="50%">

### üìù Smart Input

- **AI Edit Panel** - Dedicated editing interface with voice command text editing
- **Rich Editing Tools** - Complete editing functions including cursor movement, selection, copy-paste
- **Smart Target Selection** - Automatically identifies editing targets (selected text/last recognition/full text)
- **Custom Keys** - Personalized punctuation keys

</td>
<td width="50%">

### üé® User Experience

- **Material3 Design** - Modern interface style with Monet color adaptation
- **Multi-language Support** - Supports Simplified Chinese, Traditional Chinese, English, and Japanese
- **Keyboard Height Adjustment** - Three height levels to choose from
- **Test Input** - Test input method directly in settings
- **Statistics** - Recognition character count
- **Vibration Feedback** - Microphone / keyboard button vibration
- **Auto Update Check** - Daily automatic update check on app launch

</td>
</tr>
</table>

## üì± UI Showcase

<table>
<tr>
<td width="50%" align="center">
<img src="images/keyboard_view_en.png" alt="Keyboard View" style="max-height: 200px; width: auto;"/>
<img src="images/edit_keyboard_view.png" alt="Editing Keyboard View" style="max-height: 200px; width: auto;"/>
<img src="images/numpad_keyboard_view.jpg" alt="NumPad View" style="max-height: 200px; width: auto;"/>
<br/>
<b>üéπ Keyboard View</b>
<br/>
<sub>Clean keyboard interface with voice input, IME switching, and custom keys</sub>
</td>
<td width="50%" align="center">
<img src="images/settings_en.jpg" alt="Settings Interface" style="max-height: 500px; width: auto;"/>
<br/>
<b>‚öôÔ∏è Settings Interface</b>
<br/>
<sub>Rich configuration options with multiple ASR engines and LLM post-processing</sub>
</td>
</tr>
<tr>
<td width="50%" align="center">
<img src="images/floating_ball_en.jpg" alt="Floating Ball Feature" style="max-height: 500px; width: auto;"/>
<br/>
<b>üü£ Floating Ball Feature</b>
<br/>
<sub>Cross-IME voice recognition, voice input anytime, anywhere</sub>
</td>
<td width="50%" align="center">
<img src="images/post_processing_en.jpg" alt="AI Post-Processing" style="max-height: 500px; width: auto;"/>
<br/>
<b>ü§ñ AI Post-Processing</b>
<br/>
<sub>LLM intelligently optimizes recognition results to improve text quality</sub>
</td>
</tr>
</table>

## üöÄ Quick Start

[Provider Configuration Guide](https://brycewg.notion.site/bibi-keyboard-providers-guide)

### üìã System Requirements

- Android 10.0 (API 29) or higher
- Microphone permission (for voice recognition)
- Overlay permission (optional, for floating ball feature)
- Accessibility permission (optional, for automatic text insertion)

### üì• Installation Steps

1. **Download & Install**

   - Download the latest APK from [Releases](../../releases) page
   - Install on your Android device

2. **Enable Input Method**

   ```
   Settings ‚Üí System ‚Üí Language & Input ‚Üí Virtual Keyboard ‚Üí Manage Keyboards ‚Üí Enable "BiBi Keyboard"
   ```

3. **Configure ASR Service**

   - Open BiBi Keyboard settings
   - Select ASR vendor (recommended: Volcengine)
   - Enter your API key

4. **Start Using**

   - Switch to BiBi Keyboard in any input field
   - Long press the microphone button to start voice input

> üí° **Tip**: First-time users are recommended to configure Volcengine for 20 hours of free quota!

## üìñ User Guide

### üé§ Voice Input Feature

<details>
<summary><b>Basic Operations</b></summary>

1. Long press the microphone button in the center of the keyboard to start recording
2. Release the button, and the audio will be automatically uploaded to the selected ASR service for recognition
3. Recognition results will be automatically inserted into the current input field

**Smart Auto-Stop Feature**:

- When enabled, automatically stops recording when continuous silence is detected
- Adjustable silence duration (0.5-3 seconds) and sensitivity (1-10 levels) in settings
- Supports both streaming recognition (Volc, Soniox, DashScope, ElevenLabs, Paraformer, Zipformer) and file recognition modes

**Segmented Recording & Auto-Continue (non-streaming)**:

- When reaching per-vendor local time limit, the current segment is cut and uploaded in the background while recording immediately continues for the next segment (no gap)
- Keyboard panel and Floating Ball keep the ‚ÄúRecording‚Äù appearance during segmentation (no flicker into ‚ÄúProcessing/Idle‚Äù)
- Per-vendor local caps (non-streaming):
  - Volcengine: 1 hour (official 2h, with safety margin)
  - SiliconFlow: 20 minutes
  - ElevenLabs: 20 minutes
  - OpenAI Whisper: 20 minutes
  - Alibaba DashScope: 3 minutes
  - Google Gemini: 4 hours (official ~9.5h, with safety margin)
  - Soniox: 1 hour
  - Local SenseVoice: 5 minutes
  - Local Telespeech: 5 minutes
- Streaming mode has no duration cap (supports: Volc, Soniox, DashScope, ElevenLabs, Paraformer, Zipformer)

</details>

<details>
<summary><b>AI Editing Feature</b></summary>

### üéØ Basic Operations

1. Click the edit button on the keyboard (AI icon) to enter the AI Edit Panel
2. Speak editing commands (e.g., "delete the last word", "change 'hello' to 'hi'", etc.)
3. After speaking the command, AI will modify the selected text or previously recognized content based on the command

### üé® AI Edit Panel Features

The AI Edit Panel provides comprehensive text editing tools with a symmetrical layout:

**Left Function Area:**

- **‚¨ÖÔ∏è Return to Main Keyboard** - Exit AI Edit Panel
- **‚ú® Apply Preset Prompt** - Quickly apply preset AI prompts
- **‚óÄÔ∏è ‚ñ∂Ô∏è Cursor Movement** - Move cursor left and right
- **üî¢ Numpad** - Switch to numeric input panel
- **üìù Selection Mode** - Toggle text selection mode

**Right Function Area:**

- **üìÑ Select All** - Select all text
- **‚å´ Undo/Backspace** - Undo operations or delete characters
- **üìã Copy/Paste** - Copy and paste text
- **üè† üîö Move to Start/End** - Quickly navigate to text beginning or end

### üéôÔ∏è Edit Target Selection

AI Editing supports multiple target selection methods:

- **Selected Text Priority**: If text is selected, prioritize editing the selected content
- **Last Recognition Result**: When no selection, default to editing the last voice recognition result
- **Entire Input Field**: Configurable to edit the entire input field content

### üí° Use Cases

- **Text Correction**: "Fix typos", "Adjust sentence order"
- **Format Optimization**: "Add punctuation", "Segment text"
- **Content Rewriting**: "Simplify expression", "Polish text"
- **Batch Operations**: "Remove duplicate content", "Standardize format"

</details>

### ‚å®Ô∏è Keyboard Button Functions

<details>
<summary><b>Main Button Layout</b></summary>

| Button      | Function                | Special Operations                        |
| ----------- | ----------------------- | ----------------------------------------- |
| üé§ Mic      | Long press for voice    | -                                         |
| ü§ñ Post     | Toggle AI post-process  | -                                         |
| üí¨ Prompt   | Switch AI prompt preset | -                                         |
| ‚¨áÔ∏è Hide     | Hide keyboard           | -                                         |
| ‚å´ Back      | Delete characters       | Swipe up/left to delete all, down to undo |
| ‚öôÔ∏è Settings | Enter settings          | -                                         |
| üîÑ Switch   | Switch to other IME     | -                                         |
| ‚Üµ Enter     | New line or submit      | -                                         |

</details>

<details>
<summary><b>Custom Keys</b></summary>

- There are **4 customizable** punctuation buttons at the bottom of the keyboard
- You can customize the character or punctuation displayed on each button in settings
- Support adding common symbols: `,` `.` `?` `!` etc.

</details>

### üü£ Floating Ball Voice Recognition Feature ‚≠ê

> Perfectly solves the pain point of voice input working with regular input methods!

<details open>
<summary><b>Feature Highlights</b></summary>

#### üåê Cross-IME Voice Input

- Regardless of which input method you're currently using (Sogou, Baidu, Gboard, etc.), you can use voice input through the floating ball
- No need to frequently switch input methods, enjoy high-quality voice recognition while maintaining your original typing habits
- Recognition results are automatically inserted into the current input field for seamless integration

#### üíº Use Cases

| Scenario                | Description                                                                                     |
| ----------------------- | ----------------------------------------------------------------------------------------------- |
| üí¨ Daily Chat           | Use familiar input methods for typing, click floating ball for long text input                  |
| üìÑ Document Editing     | Use regular input methods for formatted content, quick voice input for long paragraphs          |
| üåç Multi-language Input | Maintain your IME's multi-language support while getting high-quality Chinese voice recognition |
| ‚ö° Efficiency Boost     | Switch between typing and voice input anytime, greatly improving input efficiency               |

#### üéØ Operation Flow

```
1. Enable "Use Floating Ball for Voice Recognition" in settings
2. Grant overlay permission and accessibility permission
3. Floating ball always displays on screen (adjustable transparency and size)
4. Long press and drag to adjust floating ball position
5. Click floating ball to start recording, click again to stop
6. Recognition results are automatically inserted into current input field
```

#### üé® Visual Feedback

- üîò **Idle State**: Microphone icon shows in gray
- üî¥ **Recording**: Icon turns red
- üîµ **AI Processing**: Icon turns blue
- **Function Menu**: Long press the floating ball to bring up the function menu, including options to switch to AI post-processing, switch input methods, etc.

</details>

<details>
<summary><b>Compatibility Mode</b></summary>

In some apps, input fields expose background placeholder text to Accessibility, which contaminates the inserted content. Enable ‚ÄúFloating write-text compatibility mode‚Äù in Floating Ball settings:

- When enabled: For apps listed under ‚ÄúTarget package names‚Äù, the floating ball will attempt Select-All + Paste with an invisible character to mask the background placeholder.
- Target packages: One full package name per line, exact match (e.g., org.telegram.messenger, nu.gpu.nagram).
- Built-in examples: org.telegram.messenger, nu.gpu.nagram.

> üí° Tip: If you encounter text insertion issues, enable compatibility mode and add the app's package here

</details>

<details>
<summary><b>Difference from IME Switching Floating Ball</b></summary>

| Type                      | Purpose                              | Applicable Scenarios                              |
| ------------------------- | ------------------------------------ | ------------------------------------------------- |
| üîÑ IME Switch Ball        | Quickly switch back to BiBi Keyboard | When you need to use this app's keyboard features |
| üé§ Voice Recognition Ball | Voice input with any IME             | Daily mixed usage scenarios                       |

> ‚ö†Ô∏è **Note**: The two modes are mutually exclusive. When the voice recognition floating ball is enabled, the IME switching floating ball will be automatically hidden

</details>

<details>
<summary><b>Recommended Configuration</b></summary>

```
‚úÖ Set your frequently used third-party IME as default (Sogou, Baidu, etc.)
‚úÖ Enable BiBi Keyboard's floating ball voice recognition
‚úÖ Multiple streaming engines supported: Volc, Soniox, DashScope, ElevenLabs (cloud) and Paraformer, Zipformer (local)
‚úÖ Use third-party IME for daily typing, click floating ball when voice input is needed
‚úÖ Enjoy the best of both worlds: familiar typing experience + high-quality voice recognition
‚úÖ Switch to BiBi Keyboard when needed for more smart ASR features
```

If you use Fcitx5, you can call up BiBi Keyboard through the voice recognition button and return to Fcitx5 through the BiBi Keyboard switch button.
(Requires enabling Fcitx5 linkage in BiBi Keyboard settings and ensuring Google voice input service is disabled)

</details>

---

## ‚öôÔ∏è Configuration

### üé§ Voice Recognition Configuration

[Provider Configuration Guide](https://brycewg.notion.site/bibi-keyboard-providers-guide)

### üß† LLM Post-Processing Configuration

<details>
<summary><b>Configuration Parameters</b></summary>

| Parameter         | Description                          | Example                                      |
| ----------------- | ------------------------------------ | -------------------------------------------- |
| API Key           | LLM service API key                  | `sk-xxx...`                                  |
| Service Endpoint  | LLM API address                      | `https://api.openai.com/v1/chat/completions` |
| Model Name        | LLM model to use                     | `gpt-4o-mini`                                |
| Temperature       | Control randomness of generated text | `0.0 - 2.0`                                  |
| Prompt Presets    | Multiple preset prompts              | Customizable, can add and delete             |
| Auto Post-Process | Automatic post-processing toggle     | Enable/Disable                               |

</details>

### üéõÔ∏è Other Feature Configurations

<details>
<summary><b>ASR Advanced Settings</b></summary>

- **Silence Auto-Stop**: Enable/disable auto-stop feature
- **Stop Duration**: Adjustable from 0.5-3 seconds
- **Stop Sensitivity**: 1-10 levels
- **Recognition Prompt**: Support custom prompts for Gemini, DashScope and other engines
- **Language Selection**: Soniox, DashScope support multi-language selection

</details>

<details>
<summary><b>Speech Preset Information</b></summary>

- Function Description: When speech recognition result exactly matches a "name", it is automatically replaced with its "content", helping to quickly input common phrases, signatures, addresses, employee numbers, etc.
- Matching Rules: First perform strict case-sensitive matching, if no match then perform case-insensitive matching; replacement is only triggered when the entire text is identical to the name.
- Usage: Add or delete entries in "Other Settings ‚Üí Speech Preset Information", select entries to edit through the dropdown, and fill in "name" and "content" separately.
- Example: Name "My Address" ‚Üí Content "Shanghai, Xuhui District..."; when you say "My Address" and recognition is completed, it will be directly replaced with the preset content.

</details>

<details>
<summary><b>Floating Ball Settings</b></summary>

- **Voice Recognition Ball**: Transparency, size adjustment, compatibility mode
- **IME Switching Ball**: Quick switching function
- **IME Visibility Compatibility (per‚Äëapp)**: Applies only to listed packages; in these apps use IME package detection as compatibility fallback. Includes com.tencent.mm by default

</details>

<details>
<summary><b>Experience Settings</b></summary>

- **Keyboard Height**: Three levels - Small/Medium/Large
- **Vibration Feedback**: Microphone / keyboard button vibration
- **Language Settings**: Follow system / Simplified Chinese / Traditional Chinese / English / Japanese
- **Test Input**: Test input method directly in settings
- **Auto Update**: Daily automatic update check on app launch

</details>

---

### üé® Tech Stack

```
Kotlin 2.2.20
Android SDK 36 (Compile SDK 36, Target SDK 35, Min SDK 29)
Material Design 3
Coroutines (async processing)
OkHttp 5.2.1 (network requests)
SharedPreferences (data storage)
sherpa-onnx (local ASR models)
```

---

## üìÑ License

This project is licensed under the **Apache 2.0 License**, see the [LICENSE](LICENSE) file for details.

```
Apache 2.0 License - Free to use, modify, distribute, must retain copyright notice
```

## Star History

[![Star History Chart](https://api.star-history.com/svg?repos=BryceWG/BiBi-Keyboard&type=date&legend=top-left)](https://www.star-history.com/#BryceWG/BiBi-Keyboard&type=date&legend=top-left)

## üë• Contributors

Thanks to all the developers who have contributed to this project!

<table>
<tr>
<td align="center">
<a href="https://github.com/BryceWG">
<img src="https://github.com/BryceWG.png" width="60px;" alt="BryceWG"/>
<br />
<sub><b>BryceWG</b></sub>
</a>
<br />
<sub>Project Creator</sub>
</td>
<td align="center">
  <a href="https://github.com/flyhunterl">
    <img src="https://github.com/flyhunterl.png" width="60px;" alt="flyhunterl" />
    <br />
    <sub><b>flyhunterl</b></sub>
  </a>
  <br />
  <sub>Feature Suggestions/Implementation</sub>
</td>
<td align="center">
  <a href="https://github.com/kc0ed">
    <img src="https://github.com/kc0ed.png" width="60px;" alt="kc0ed" />
    <br />
    <sub><b>kc0ed</b></sub>
  </a>
  <br />
  <sub>Feature Suggestions/Implementation</sub>
</td>
</tr>
</table>

## ‚òï Support & Appreciation

If this project helps you, please give it a Star ‚≠êÔ∏è and feel free to buy me a coffee ‚òïÔ∏è

<div align="center">
<img src="images/wechat.jpg" alt="WeChat Appreciation Code" width="300"/>
<br/>
<sub>Scan with WeChat to appreciate</sub>
</div>

## üíù Appreciation List

Thanks to the following users for their support and appreciation. Your encouragement is the driving force for the project's continuous development!

Anonymous - 50 RMB

ÁéãÂçÉÈÉ° - 26.66 RMB

Â§©ÂáâÂ•Ω‰∏™Áßã - 16.66 RMB

Return - 16.66 RMB

Ê†ë‰∫∫ - 10.24 RMB

x Âπ¥ - 10 RMB

flyhunterl - 6.66 RMB

---

## üôè Acknowledgments

Thanks to the following open-source projects for their technical support:

- [sherpa-onnx](https://github.com/k2-fsa/sherpa-onnx) - Provides technical support for local ASR models, making offline voice recognition possible
- [SyncClipboard](https://github.com/Jeric-X/SyncClipboard) - Provides clipboard synchronization backend service (not running locally, requires server)
- [Phosphor](https://github.com/phosphor-icons/homepage) - Provides almost all icons used in the software
- [WaveLineView](https://github.com/Jay-Goo/WaveLineView) - Provides beautiful wave animation implementation for audio visualization, making recording experience more fluid and visually appealing

---

<div align="center">

**Made with ‚ù§Ô∏è by BryceWG**

</div>
